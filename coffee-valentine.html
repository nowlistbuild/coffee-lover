<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>‚òï You're Brew-tiful! ‚òï</title>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Lato:wght@400;700&display=swap');

    :root {
      --espresso: #3e2723;
      --latte: #d7ccc8;
      --cream: #f5f5dc;
      --caramel: #d4a574;
      --pink: #f48fb1;
    }

    * { 
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100svh;
      display: grid;
      place-items: center;
      background: linear-gradient(135deg, #6d4c41 0%, #4e342e 100%);
      font-family: 'Lato', sans-serif;
      overflow: hidden;
      padding: 20px;
      position: relative;
    }

    /* Floating coffee beans */
    .ambiance {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
    }

    .bean {
      position: absolute;
      font-size: 20px;
      opacity: 0.2;
      animation: float 15s linear infinite;
    }

    @keyframes float {
      0% {
        transform: translateY(100vh) rotate(0deg);
      }
      100% {
        transform: translateY(-100px) rotate(360deg);
      }
    }

    /* Steam effect */
    .steam {
      position: absolute;
      font-size: 30px;
      animation: rise 4s ease-in-out infinite;
      opacity: 0;
    }

    @keyframes rise {
      0% {
        transform: translateY(0) translateX(0);
        opacity: 0.6;
      }
      100% {
        transform: translateY(-80px) translateX(10px);
        opacity: 0;
      }
    }

    #confettiCanvas {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 9999;
    }

    .cafe-card {
      width: min(550px, 92vw);
      background: linear-gradient(135deg, var(--cream) 0%, var(--latte) 100%);
      border-radius: 30px;
      padding: 40px 30px;
      box-shadow: 
        0 25px 70px rgba(0,0,0,0.4),
        inset 0 0 0 1px rgba(255,255,255,0.5);
      text-align: center;
      position: relative;
      z-index: 1;
    }

    /* Coffee cups forming heart */
    .coffee-scene {
      position: relative;
      width: 100%;
      max-width: 300px;
      margin: 0 auto 30px;
      height: 180px;
    }

    .cup {
      width: 100px;
      height: 120px;
      position: absolute;
      top: 30px;
    }

    .cup-left { left: 30px; }
    .cup-right { right: 30px; }

    .cup-body {
      width: 100%;
      height: 90px;
      background: linear-gradient(135deg, var(--caramel) 0%, #a1887f 100%);
      border-radius: 0 0 40px 40px;
      position: relative;
      box-shadow: inset -5px -5px 15px rgba(0,0,0,0.2);
    }

    .cup-body::before {
      content: "";
      position: absolute;
      top: -15px;
      left: 0;
      right: 0;
      height: 15px;
      background: var(--caramel);
      border-radius: 50% 50% 0 0;
    }

    .handle {
      position: absolute;
      right: -20px;
      top: 20px;
      width: 30px;
      height: 40px;
      border: 5px solid var(--caramel);
      border-left: none;
      border-radius: 0 50% 50% 0;
    }

    .coffee {
      position: absolute;
      top: -10px;
      left: 10%;
      right: 10%;
      height: 50px;
      background: var(--espresso);
      border-radius: 0 0 20px 20px;
      overflow: hidden;
    }

    .foam {
      position: absolute;
      top: -8px;
      left: 0;
      right: 0;
      height: 20px;
      background: var(--cream);
      border-radius: 50%;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    /* Heart between cups */
    .heart-steam {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      font-size: 50px;
      color: var(--pink);
      filter: drop-shadow(0 5px 15px rgba(244, 143, 177, 0.5));
      animation: heartBeat 1.5s ease-in-out infinite;
    }

    @keyframes heartBeat {
      0%, 100% { transform: translateX(-50%) scale(1); }
      50% { transform: translateX(-50%) scale(1.1); }
    }

    h1 {
      font-family: 'Pacifico', cursive;
      font-size: clamp(32px, 5.5vw, 48px);
      color: var(--espresso);
      margin: 20px 0 10px;
      line-height: 1.3;
    }

    .pun {
      font-size: clamp(16px, 3.5vw, 22px);
      color: var(--pink);
      font-weight: 700;
      margin-bottom: 30px;
    }

    .counter {
      position: relative;
      height: 190px;
      margin: 25px 0;
      background: rgba(109, 76, 65, 0.1);
      border-radius: 20px;
      padding: 20px;
      overflow: visible;
    }

    button {
      position: absolute;
      padding: 16px 32px;
      font-family: 'Lato', sans-serif;
      font-weight: 700;
      font-size: clamp(16px, 3.5vw, 20px);
      border: none;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }

    #yesBtn {
      left: 12%;
      top: 50%;
      transform: translateY(-50%);
      background: linear-gradient(135deg, var(--pink) 0%, #ec407a 100%);
      color: white;
    }

    #yesBtn:hover {
      transform: translateY(-50%) scale(1.08);
      box-shadow: 0 12px 30px rgba(244, 143, 177, 0.4);
    }

    #noBtn {
      right: 12%;
      top: 50%;
      transform: translateY(-50%);
      background: linear-gradient(135deg, #bcaaa4 0%, #a1887f 100%);
      color: white;
    }

    .hint {
      font-size: clamp(12px, 2.5vw, 15px);
      color: #6d4c41;
      margin-top: 15px;
      font-style: italic;
    }

    .result {
      display: none;
      animation: warmUp 0.8s ease;
    }

    @keyframes warmUp {
      0% {
        opacity: 0;
        transform: scale(0.9);
        filter: blur(5px);
      }
      100% {
        opacity: 1;
        transform: scale(1);
        filter: blur(0);
      }
    }

    .result h2 {
      font-family: 'Pacifico', cursive;
      font-size: clamp(36px, 6vw, 54px);
      color: var(--espresso);
      margin: 20px 0;
    }

    .celebration {
      font-size: clamp(18px, 4vw, 24px);
      color: var(--espresso);
      line-height: 1.8;
      margin-top: 20px;
    }

    .coffee-hearts {
      font-size: clamp(50px, 8vw, 80px);
      margin: 25px 0;
      display: block;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }

    .blend {
      color: var(--pink);
      font-weight: 700;
    }
  </style>
</head>

<body>
  <!-- Floating coffee beans -->
  <div class="ambiance" id="ambiance"></div>
  
  <canvas id="confettiCanvas"></canvas>

  <main class="cafe-card">
    <!-- Coffee Cups Scene -->
    <div class="coffee-scene">
      <!-- Steam effects -->
      <div class="steam" style="left: 60px; animation-delay: 0s;">‚òÅÔ∏è</div>
      <div class="steam" style="left: 70px; animation-delay: 0.5s;">‚òÅÔ∏è</div>
      <div class="steam" style="right: 60px; animation-delay: 0.8s;">‚òÅÔ∏è</div>
      <div class="steam" style="right: 70px; animation-delay: 1.3s;">‚òÅÔ∏è</div>
      
      <!-- Left Cup -->
      <div class="cup cup-left">
        <div class="coffee">
          <div class="foam"></div>
        </div>
        <div class="cup-body">
          <div class="handle"></div>
        </div>
      </div>

      <!-- Right Cup -->
      <div class="cup cup-right">
        <div class="coffee">
          <div class="foam"></div>
        </div>
        <div class="cup-body">
          <div class="handle"></div>
        </div>
      </div>

      <!-- Heart between cups -->
      <div class="heart-steam">üíï</div>
    </div>

    <h1>You're Brew-tiful!</h1>
    <p class="pun">‚òï Be My Valentine? ‚òï</p>

    <div class="counter" id="counter">
      <button id="yesBtn">Yes Please! ‚òï</button>
      <button id="noBtn">Not My Type</button>
    </div>

    <div class="hint" id="hint">
      "No" can't handle the heat... ‚òïÔ∏è
    </div>

    <div class="result" id="result">
      <h2>Perfect Blend! üíï</h2>
      <span class="coffee-hearts">‚òïüíñ‚òï</span>
      <div class="celebration">
        We're a <span class="blend">perfect blend</span>!<br/>
        Here's to our love story...<br/>
        One cup at a time!<br/>
        <strong style="color: var(--pink);">Happy Valentine's Day!</strong>
      </div>
    </div>
  </main>

  <script>
    // Generate floating coffee beans
    const ambiance = document.getElementById("ambiance");
    const beans = ['‚òï', 'ü´ò', '‚òï', '‚ô®Ô∏è'];
    for (let i = 0; i < 20; i++) {
      const bean = document.createElement("div");
      bean.className = "bean";
      bean.textContent = beans[Math.floor(Math.random() * beans.length)];
      bean.style.left = Math.random() * 100 + "%";
      bean.style.animationDelay = Math.random() * 15 + "s";
      bean.style.animationDuration = (Math.random() * 10 + 10) + "s";
      ambiance.appendChild(bean);
    }

    const counter = document.getElementById("counter");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const result = document.getElementById("result");
    const hint = document.getElementById("hint");

    /* CONFETTI */
    const confettiCanvas = document.getElementById("confettiCanvas");
    
    function resizeConfettiCanvas() {
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      confettiCanvas.width = Math.floor(window.innerWidth * dpr);
      confettiCanvas.height = Math.floor(window.innerHeight * dpr);
    }

    resizeConfettiCanvas();
    window.addEventListener("resize", resizeConfettiCanvas);

    const confettiInstance = confetti.create(confettiCanvas, {
      resize: false,
      useWorker: true
    });

    function coffeeConfetti() {
      const colors = ['#f48fb1', '#d7ccc8', '#d4a574', '#6d4c41'];
      const end = Date.now() + 2500;

      (function frame() {
        confettiInstance({
          particleCount: 3,
          angle: 60,
          spread: 55,
          origin: { x: 0, y: 0.6 },
          colors: colors,
          shapes: ['circle'],
          scalar: 1.2
        });
        confettiInstance({
          particleCount: 3,
          angle: 120,
          spread: 55,
          origin: { x: 1, y: 0.6 },
          colors: colors,
          shapes: ['circle'],
          scalar: 1.2
        });
        if (Date.now() < end) {
          requestAnimationFrame(frame);
        }
      })();

      // Big heart explosion
      setTimeout(() => {
        confettiInstance({
          particleCount: 100,
          spread: 100,
          origin: { x: 0.5, y: 0.5 },
          colors: ['#f48fb1', '#ec407a'],
          shapes: ['circle'],
          scalar: 1.5
        });
      }, 400);
    }

    /* YES BUTTON GROWS */
    let yesScale = 1;
    function growYes() {
      yesScale = Math.min(1.5, yesScale + 0.05);
      yesBtn.style.transform = `translateY(-50%) scale(${yesScale})`;
    }

    /* NO BUTTON - TOO HOT TO HANDLE */
    function tooHot(px, py) {
      const c = counter.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();
      
      const distance = Math.hypot(
        (b.left + b.width / 2) - px,
        (b.top + b.height / 2) - py
      );

      if (distance < 130) {
        // Calculate escape vector
        let dx = (b.left + b.width / 2) - px;
        let dy = (b.top + b.height / 2) - py;
        let mag = Math.hypot(dx, dy) || 1;
        dx /= mag;
        dy /= mag;

        // Move away smoothly
        let newRight = parseFloat(noBtn.style.right) || 12;
        let newTop = parseFloat(noBtn.style.top) || 50;
        
        // Add movement based on pointer proximity
        const intensity = Math.max(0, (130 - distance) / 130);
        newRight += dx * 3 * intensity;
        newTop -= dy * 3 * intensity;
        
        // Clamp to boundaries
        newRight = Math.max(5, Math.min(45, newRight));
        newTop = Math.max(20, Math.min(80, newTop));
        
        noBtn.style.right = newRight + "%";
        noBtn.style.top = newTop + "%";
        
        // Add wiggle effect
        const wiggle = Math.sin(Date.now() / 100) * 3;
        noBtn.style.transform = `translateY(-50%) rotate(${wiggle}deg)`;
        
        growYes();
      }
    }

    counter.addEventListener("pointermove", e => {
      tooHot(e.clientX, e.clientY);
    });

    noBtn.addEventListener("click", e => e.preventDefault());

    /* YES CLICK */
    yesBtn.addEventListener("click", () => {
      counter.style.display = "none";
      hint.style.display = "none";
      result.style.display = "block";
      resizeConfettiCanvas();
      coffeeConfetti();
    });
  </script>
</body>
</html>
